# Инструкция по развертыванию

Суть приложения заключается в следующем. Пользователь создает тикет, ему возвращается id тикета. Он сохраняется в базу данных. Одновременно передается сообщение kafka. Consumer обрабатывает это сообщение и помечает в базе данных данное сообщение как обработанное (`is_completed=true`). Далее пользователь может получить сообщение по его id.

1. Развернуть kafka, zookeeper и postgresql - `docker compose up -d`
2. Установить (если не установлен) пакетный менеджер poetry - `brew install poetry`
3. Установить зависимости - `poetry shell && poetry install`
4. Накатить миграции в бд - `alembic upgrade head`
5. Запустить приложение - `uvicorn kafka_demo.web.application:app`
6. Перейти по адресу `localhost:8000/docs`
7. Создать тикет в документации по адресу `POST localhost:8000/`
8. Получить тикет с помощью роута `GET http://localhost:8000/`. Поле `is_completed` должно быть `false`
9. Подождать 5 секунд и получить тикет с помощью роута `GET http://localhost:8000/`. Поле `is_completed` должно быть `true`

Демо видео - `demo.mov`  
Диаграмма - `Kafka.drawio`
